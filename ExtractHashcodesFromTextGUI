# Please note that you must first install PyQt5 and fake_useragent(pip install ...) in your Python environment before running this script.

from PyQt5.QtWidgets import QApplication, QWidget, QVBoxLayout, QPushButton, QLabel, QLineEdit, QTextEdit
from fake_useragent import UserAgent
import requests
import json
import sys
import re

class App(QWidget):

   def __init__(self):
       super().__init__()
       self.title = 'GDN HET - Hashcode Extraction Tool'
       self.left = 0
       self.top = 0
       self.width = 300
       self.height = 200
       self.initUI()

   def initUI(self):
       self.setWindowTitle(self.title)
       self.setGeometry(self.left, self.top, self.width, self.height)

       self.layout = QVBoxLayout()

       self.input_label = QLabel('Input text:')
       self.input_text = QTextEdit()
       self.layout.addWidget(self.input_label)
       self.layout.addWidget(self.input_text)

       self.submit_button = QPushButton('Submit')
       self.submit_button.clicked.connect(self.submit)
       self.layout.addWidget(self.submit_button)

       self.output_label = QLabel('Hashcodes:')
       self.output_text = QTextEdit()
       self.output_text.setReadOnly(True)
       self.layout.addWidget(self.output_label)
       self.layout.addWidget(self.output_text)

       self.copy_button = QPushButton('Copy to Clipboard', self)
       self.copy_button.clicked.connect(self.copy_text)
       self.layout.addWidget(self.copy_button)

       self.setLayout(self.layout)

   def submit(self):
       input_text = self.input_text.toPlainText()

       def extract_hash_values(text):
          # Use regular expression to find all occurrences of the pattern
          pattern = r'STRING TRANSLATE BEGIN HASH:([a-fA-F0-9]+)'
          hash_values = re.findall(pattern, text)
          return hash_values

        # Call the function:
       hash_values = extract_hash_values(input_text)

      # Print the extracted hash values as a single string with commas
       hash_values_string = ','.join(hash_values)
       # hash_values_link = '&hashcodes='.join(hash_values)
       self.output(hash_values_string)
       # self.projectLink(hash_values_link)

   def copy_text(self):
     # Get the text from the QTextEdit
     text_to_copy = self.output_text.toPlainText()

     # Set the text to the clipboard
     clipboard = QApplication.clipboard()
     clipboard.setText(text_to_copy)

   def output(self, text):
     self.output_text.clear()
     self.output_text.append(text)

if __name__ == '__main__':
   app = QApplication(sys.argv)
   ex = App()
   ex.show()
   sys.exit(app.exec_())